<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Charity Poker Seating Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /** Mobile-friendly touch targets **/
        button { touch-action: manipulation; }
        input { font-size: 16px !important; } /* Prevents iOS auto-zoom on focus */
        
        .highlight { border: 4px solid #eab308; transform: scale(1.02); z-index: 10; box-shadow: 0 0 20px rgba(234, 179, 8, 0.4); }
        .dim { opacity: 0.15; filter: grayscale(1); }
        
        /* Smooth scrolling for finding players */
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="bg-slate-950 text-white p-4 font-sans mb-20"> <div class="max-w-7xl mx-auto">
        
        <header class="sticky top-0 z-50 bg-slate-900/95 backdrop-blur-md p-4 rounded-xl border border-slate-800 mb-6 shadow-2xl">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-xl font-black text-red-600 uppercase italic leading-none">Charity Poker</h1>
                    <p class="text-slate-500 text-[10px] uppercase tracking-widest mt-1">Seating Coordinator</p>
                </div>
                <div class="w-full md:w-auto">
                    <input type="number" id="searchBox" placeholder="FIND PLAYER #" oninput="searchPlayer()" 
                           class="w-full md:w-48 p-3 bg-slate-950 rounded-lg border-2 border-yellow-600 outline-none text-yellow-500 font-bold text-center placeholder:text-yellow-900">
                </div>
            </div>
        </header>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-8">
            <div class="bg-slate-900 p-5 rounded-xl border border-slate-800 shadow-xl">
                <h3 class="text-red-500 font-bold mb-3 text-sm">1. INITIAL SETUP</h3>
                <div class="grid grid-cols-2 gap-2 mb-3">
                    <input type="number" id="playerCount" value="64" class="p-2 bg-slate-800 rounded border border-slate-700 text-center">
                    <input type="number" id="tableSize" value="8" class="p-2 bg-slate-800 rounded border border-slate-700 text-center">
                </div>
                <button onclick="fullShuffle()" class="w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg font-black text-xs uppercase">Reset & Shuffle All</button>
            </div>

            <div class="bg-slate-900 p-5 rounded-xl border border-slate-800 shadow-xl border-t-4 border-t-blue-600">
                <h3 class="text-blue-500 font-bold mb-3 text-sm italic">2. LATE ARRIVALS</h3>
                <div class="flex gap-2">
                    <input type="number" id="latePlayerId" placeholder="New ID #" class="flex-1 p-2 bg-slate-800 rounded border border-slate-700">
                    <button onclick="addLatePlayer()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-bold text-xs">ADD SEAT</button>
                </div>
            </div>

            <div class="bg-slate-900 p-5 rounded-xl border border-slate-800 shadow-xl flex justify-around items-center">
                <div class="text-center">
                    <span class="block text-[10px] text-slate-500 uppercase">Seated</span>
                    <span id="statTotal" class="text-3xl font-black text-white">0</span>
                </div>
                <div class="h-10 w-px bg-slate-800"></div>
                <div class="text-center">
                    <span class="block text-[10px] text-slate-500 uppercase">Open Seats</span>
                    <span id="statOpen" class="text-3xl font-black text-green-500">0</span>
                </div>
            </div>
        </div>

        <div id="tableContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
    </div>

    <script>
        let tables = [];

        function fullShuffle() {
            if(!confirm("Reshuffle everyone? This resets the whole room.")) return;
            const pCount = parseInt(document.getElementById('playerCount').value);
            const tSize = parseInt(document.getElementById('tableSize').value);
            
            let players = Array.from({length: pCount}, (_, i) => i + 1);
            for (let i = players.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [players[i], players[j]] = [players[j], players[i]];
            }

            tables = [];
            let tableCount = Math.ceil(pCount / tSize);
            for(let t = 0; t < tableCount; t++) {
                tables.push({ id: t + 1, players: players.slice(t * tSize, (t + 1) * tSize), max: tSize });
            }
            render();
        }

        function addLatePlayer() {
            const id = parseInt(document.getElementById('latePlayerId').value);
            if(!id) return;
            if(tables.some(t => t.players.includes(id))) return alert("Already seated!");

            let target = tables.find(t => t.players.length < t.max);
            if(target) {
                target.players.push(id);
            } else {
                tables.push({ id: tables.length + 1, players: [id], max: parseInt(document.getElementById('tableSize').value) });
            }
            
            document.getElementById('latePlayerId').value = '';
            render();
            highlightPlayer(id);
        }

        function highlightPlayer(id) {
            document.getElementById('searchBox').value = id;
            searchPlayer();
            setTimeout(() => {
                document.getElementById('searchBox').value = '';
                searchPlayer();
            }, 4000);
        }

        function render() {
            const container = document.getElementById('tableContainer');
            container.innerHTML = '';
            let seated = 0; let totalMax = 0;

            tables.forEach(t => {
                seated += t.players.length;
                totalMax += t.max;
                const card = document.createElement('div');
                card.id = `table-card-${t.id}`;
                card.className = 'bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-lg transition-all duration-300';
                card.innerHTML = `
                    <div class="bg-slate-800 px-3 py-2 border-b border-slate-700 flex justify-between items-center">
                        <span class="font-black text-xs italic text-slate-400">T-${t.id}</span>
                        <span class="text-[9px] bg-slate-950 px-2 py-0.5 rounded text-slate-500">${t.players.length}/${t.max}</span>
                    </div>
                    <div class="p-3 grid grid-cols-2 gap-2">
                        ${t.players.map(p => `
                            <div class="player-tag bg-slate-950 py-3 rounded border border-slate-800 text-center" data-player="${p}">
                                <span class="text-xl font-mono font-bold text-red-500">#${p}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(card);
            });
            document.getElementById('statTotal').innerText = seated;
            document.getElementById('statOpen').innerText = totalMax - seated;
        }

        function searchPlayer() {
            const val = parseInt(document.getElementById('searchBox').value);
            const cards = document.querySelectorAll('[id^="table-card-"]');
            const tags = document.querySelectorAll('.player-tag');

            cards.forEach(card => {
                const tableId = parseInt(card.id.split('-').pop());
                const table = tables.find(t => t.id === tableId);
                if(!val) { card.classList.remove('dim', 'highlight'); return; }
                
                if(table && table.players.includes(val)) {
                    card.classList.add('highlight');
                    card.classList.remove('dim');
                } else {
                    card.classList.add('dim');
                    card.classList.remove('highlight');
                }
            });

            tags.forEach(tag => {
                if(!val) { tag.classList.remove('bg-yellow-900', 'border-yellow-500'); return; }
                if(parseInt(tag.dataset.player) === val) {
                    tag.classList.add('bg-yellow-900', 'border-yellow-500');
                } else {
                    tag.classList.remove('bg-yellow-900', 'border-yellow-500');
                }
            });
        }
    </script>
</body>

</html>
